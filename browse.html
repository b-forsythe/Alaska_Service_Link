<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="./assets/stylesheet.css">
    <link rel="stylesheet" href="./assets/listings.css">

</head>

<body>
    <div class="browse-page">
        <div style="display:flex; justify-content: space-between; align-items: center;">
            <img src="./assets/aksl1_no_underline.svg" alt="Logo" style="width: 20%; height:auto">
            <div style="display: flex; gap:12px">
                <input class="header_button" type="button" id="FAQ" value="FAQ" />
                <input class="header_button" type="button" id="profile" value="My Dashboard">
            </div>
        </div>
        <hr style="margin-bottom:5%" />
        `
        <!-- Begin Sidebar -->
        <div class="browse-wrapper">
            <div class="sidebar">
                <button class="sidebar-button">Filter 1</button>
                <button class="sidebar-button">Filter 2</button>
                <!-- more filters -->
            </div>
            <!-- begin Listings -->
            <div class="listing-container">

            </div>
        </div>
    </div>

    <!--   <div class="listing-container">
        <div class="listing">
            <h3 class="listing_title">${project.work_type}</h3>
            <p class="listing_location">Location: ${project.location}</p>
            <p class="listing_description">${project.description}</p>
        </div>
        <div class="listing">...</div>
    </div>
</div> -->

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            fetch('fetch_projects.php')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById("listing");  // Updated this line
                    container.innerHTML = ""; // Clear existing listings

                    data.forEach(project => {
                        const listing = document.createElement("div");
                        listing.className = "listing";
                        listing.innerHTML = `
    <div class="listing">
        <h3 class="listing_title">${project.work_type}</h3>
        <p class="listing_location">Location: ${project.location}</p>
        <p class="listing_description">${project.other_details || ''}</p>
        ${project.img ? `<button onclick="toggleImage(this)">Show Image</button><br><img src="${project.img}" style="display:none; max-width:100%; margin-top:10px;" />` : ''}
        <div class="button-wrapper">
            <input class="view_full" type="button" value="View Full Listing">
            <input class="haptic_browser" type="button" value="Connect with Client">
        </div>
    </div>
`;

                        container.appendChild(listing);
                    });
                })
                .catch(error => {
                    console.error("Error loading listings:", error);
                });
        });
    </script>

    <script src="./buttons.js"></script>

    <script>
    function toggleImage(button) {
        const img = button.nextElementSibling;
        if (img.style.display === "none") {
            img.style.display = "block";
            button.textContent = "Hide Image";
        } else {
            img.style.display = "none";
            button.textContent = "Show Image";
        }
    }
</script>

</body>

</html>